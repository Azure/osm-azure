steps: 
- bash: |
    test_label=$(kubectl get namespace kube-system -o jsonpath="{.metadata.labels.openservicemesh\.io\/ignore}")
    if [[ $test_label != "true" ]] then; 
      echo "openservicemesh.io/ignore label has not been added to kube-system" && exit 1
    fi
  displayName: Verify that openservicemesh.io/ignore label has been added to kube-system
- bash: |
    test_label=$(kubectl get namespace azure-arc -o jsonpath="{.metadata.labels.openservicemesh\.io\/ignore}")
    if [[ $test_label != "true" ]] then; 
      echo "openservicemesh.io/ignore label has not been added to azure-arc" && exit 1
    fi
  displayName: Verify that openservicemesh.io/ignore label has been added to azure-arc
- bash: |
    test_label=$(kubectl get namespace $(release.namespace) -o jsonpath="{.metadata.labels.openservicemesh\.io\/ignore}")
    if [[ $test_label != "true" ]] then; 
      echo "openservicemesh.io/ignore label has not been added to $(release.namespace)" && exit 1
    fi
  displayName: Verify that openservicemesh.io/ignore label has been added to $(release.namespace)
- bash: |
    test_label=$(kubectl get namespace $(release.namespace) -o jsonpath="{.metadata.labels.admission\.policy\.azure\.com\/ignore}")
    if [[ $test_label != "true" ]] then; 
      echo "admission.policy.azure.com/ignore label has not been added to $(release.namespace)" && exit 1
    fi
  displayName: Verify that admission.policy.azure.com/ignore label has been added to $(release.namespace)
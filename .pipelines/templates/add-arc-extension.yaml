parameters: 
  - name: useLatest
    type: boolean
    default: false

steps:  
  - bash: |
      echo ${{ parameters.useLatest }}
      echo $(LATEST_TAG)
      ./scripts/add-extension.sh
    displayName: Add Arc extension to AKS cluster
    env:
      SUBSCRIPTION: $(SUBSCRIPTION_ID)
      RESOURCEGROUP: $(AZURE_CLUSTER_NAME)
      CLUSTERNAME: $(AZURE_CLUSTER_NAME)
      ${{ if eq(parameters.useLatest, True) }}:
        CHECKOUT_TAG: $(LATEST_TAG)
      ${{ if eq(parameters.useLatest, False) }}:
        CHECKOUT_TAG: $(CHECKOUT_TAG)
      REGION: $(AZURE_LOCATION)
      RELEASE_NAMESPACE: $(release.namespace)
